!function(){function e(){var e=document.createElement("script");e.setAttribute("src","//widget.fitanalytics.com/widget_zepto.js"),e.setAttribute("type","text/javascript"),document.body.appendChild(e),t.initialize(),window._fitAnalytics=window._upcload=function(){},window._fitAnalytics.shop=t}if(!window._fitAnalytics){var t={prefix:"mango-",isMobile:/iphone|android|iemobile|blackberry/i.test(window.navigator.userAgent)&&"ontouchstart"in window,initialize:function(){var e=setInterval(function(){t.isLoaded()&&(clearInterval(e),t.onLoaded())},100)},addToCart:function(){},showSizeFinderButton:function(){},sizeMappings:{},lastScreen:"",isLoaded:function(){return"function"==typeof window.FitAnalyticsWidget},onLoaded:function(){t.onPageLoaded()},getLanguage:function(){return window.dataLayerV2Json&&window.dataLayerV2Json.shop&&window.dataLayerV2Json.shop.languageISO||""},getCountry:function(){return window.dataLayerV2Json&&window.dataLayerV2Json.shop&&window.dataLayerV2Json.shop.countryISO||""},getCurrentSerial:function(e){return e.id&&e.colorId&&t.prefix+e.id+"_"+e.colorId||""},getSizes:function(e){var n={};return e&&e.sizes&&e.sizes.map(function(e){n[e.label.replace(/ \(US\)/,"")]=e.hasStock,t.sizeMappings[e.label.replace(/ \(US\)/,"")]=e.id}),n},onPageLoaded:function(){t.loadWidget(),t.setButtonRequestListener(),t.setButtonClickListener()},loadWidget:function(){t.widget=new window.FitAnalyticsWidget({language:t.getLanguage(),shopCountry:t.getCountry(),recommend:function(e,n,i){t.showSizeFinderButton({supportedProduct:!0,recommendedSizeId:t.sizeMappings[n]})},cart:function(e,n,i){t.addToCart(t.sizeMappings[n])},close:function(e,n,i){var o=i&&i.displaySize||n,r=t.sizeMappings[o]||null;t.showSizeFinderButton({supportedProduct:!0,recommendedSizeId:r}),t.sendEvent("fitFinderModalClosed",{bubbles:!0,detail:{screen:t.lastScreen,recommendedSizeId:r,recommendedSize:o,isRecommendationProvisional:o?!!i.isProvisional:null}})},open:function(){t.widget.wrapper&&t.widget.wrapper[0]&&(t.widget.wrapper[0].dir="ltr")}}),t.widget.options.metricEvent=function(e,n){"landed"==n&&t.storeLastScreenName(e)}},storeLastScreenName:function(e){switch(e){case"shapeSelectScreen_1":t.lastScreen="tummyShapeScreen";break;case"shapeSelectScreen_2":t.lastScreen="m"==t.widget.getUserGender()?"chestShapeScreen":"hipShapeScreen";break;case"resultsScreen_final":t.lastScreen="finalResultsScreen";break;case"loading":t.lastScreen="loadingScreen";break;default:t.lastScreen=e}},sendEvent:function(e,t){if("function"!=typeof window.CustomEvent&&i(),"function"==typeof window.CustomEvent){var n=new CustomEvent(e,t);document.dispatchEvent(n)}},setButtonRequestListener:function(){window.addEventListener("sizeFinderButtonRequested",function(e){var i=n(e,"detail.data.product",{});t.showSizeFinderButton=n(e,"detail.showSizeFinderButton",t.showSizeFinderButton),i&&t.onSizeFinderButtonRequested(i)})},onSizeFinderButtonRequested:function(e){var n=t.getCurrentSerial(e);n&&t.widget.reconfigure({productId:n},function(n){"IT"===t.getCountry()&&n.garment&&"m"===n.garment.gender&&"lower"===n.garment.category||t.onProductRequested(e)},t.onProductRequestedError)},onProductRequested:function(e){t.widget.getRecommendation({productId:t.getCurrentSerial(e),thumb:e.thumbnail||"",manufacturedSizes:t.getSizes(e)})},onProductRequestedError:function(){t.showSizeFinderButton({supportedProduct:!1})},setButtonClickListener:function(){window.addEventListener("openSizeFinder",function(e){var i=n(e,"detail.data.product",{});t.addToCart=n(e,"detail.addToCart",t.addToCart),t.onButtonClick(i)})},onButtonClick:function(e){t.widget.meterClick("sizeAdvisor"),t.widget.open({productId:t.getCurrentSerial(e),thumb:e.thumbnail,manufacturedSizes:t.getSizes(e)})}},n=function(e,t,n){e=e&&e instanceof Object?e:{},null==n&&(n=null),"."===t&&(t="");for(var i="[object Array]"===Object.prototype.toString.apply(t)?t:t.split("."),o=0,r=i.length;o<r;o++){var a=e[i[o]];if(null==a)return n;e=a}return a},i=function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e};"interactive"===document.readyState||"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",function(){e()})}}();
//# sourceMappingURL=plp.js.map